<ion-view>
    <ion-content>
        <section data-ng-controller="CreateTripController">
            <div class="page-header">
                <h1>Client prepare trip</h1>
            </div>
            <div data-ng-if="(error)" class="alert alert-warning text-center">
                {{error}}
            </div>
            <div data-ng-if="authentication.user.is_client && authentication.user.trip">
                You already have
                <a data-ng-href="/#!/profiles/{{authentication.user._id}}/trip">trip</a>
            </div>
            <div data-ng-if="authentication.user.is_client && !authentication.user.trip">
                <form name="prepare_trip" class="form-horizontal" data-ng-submit="prepare()" novalidate>
                    <fieldset>
                        <div class="form-group">
                            <label class="control-label" for="start_address">Location</label>
                            <leaflet markers="markers" center="center" height="200"></leaflet>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="start_address">Start address</label>

                            <div class="controls">
                                <input type="text" name="start_address" data-ng-model="preparation.start_address"
                                       id="start_address" class="form-control" placeholder="start_address">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="end_address">End address</label>

                            <div class="controls">
                                <input type="text" name="end_address" data-ng-model="preparation.end_address"
                                       id="end_address" class="form-control" placeholder="end_address">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="price">Price</label>

                            <div class="controls">
                                <input type="number" name="price" data-ng-model="preparation.price" id="price"
                                       class="form-control" placeholder="price">
                            </div>
                        </div>
                        <div class="form-group"
                             data-ng-if="authentication && authentication.user && authentication.user.bonus_amount > 0">
                            <label class="control-label" for="use_bonus">use_bonus</label>

                            <div class="controls">
                                <input type="checkbox" checked name="use_bonus" data-ng-model="preparation.use_bonus"
                                       id="use_bonus" class="form-control" placeholder="use_bonus">
                            </div>
                        </div>
                        <div class="form-group"
                             data-ng-if="authentication && authentication.user && authentication.user.bonus_amount <= 0">
                            Недостаточно бонусов {{authentication.user.bonus_amount}} для использования в поездке с
                            бонусом
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="immediate">immediate</label>

                            <div class="controls">
                                <input type="checkbox" name="immediate" data-ng-model="preparation.immediate"
                                       id="immediate" class="form-control" placeholder="immediate">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="note">note</label>

                            <div class="controls">
                                <textarea name="note" data-ng-model="preparation.note" id="note" class="form-control"
                                          placeholder="note"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-default" value="Prepare trip">
                        </div>
                    </fieldset>
                </form>
            </div>
        </section>
    </ion-content>
</ion-view>