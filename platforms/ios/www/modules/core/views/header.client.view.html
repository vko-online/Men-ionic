<ion-side-menus enable-menu-with-back-views="false">
    <ion-side-menu-content>
        <ion-nav-bar class="bar-positive">
            <ion-nav-buttons side="left">
                <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
                </button>
            </ion-nav-buttons>
            <ion-nav-back-button>
            </ion-nav-back-button>
        </ion-nav-bar>
        <ion-view>
            <ion-nav-view></ion-nav-view>
        </ion-view>
    </ion-side-menu-content>

    <ion-side-menu side="left" data-ng-controller="HeaderController">
        <ion-header-bar class="bar-positive">
            <h1 class="title">Insport</h1>
        </ion-header-bar>
        <ion-content>
            <ion-list>
                <ion-item menu-close data-ng-hide="authentication.user">
                    <ul>
                        <li ui-route="/signup" ng-class="{active: $uiRoute}">
                            <a href="#!/signup">Sign Up</a>
                        </li>
                        <li class="divider-vertical"></li>
                        <li ui-route="/signin" ng-class="{active: $uiRoute}">
                            <a href="#!/signin">Sign In</a>
                        </li>
                    </ul>
                </ion-item>
                <ion-item menu-close data-ng-show="authentication.user">
                    <ul>
                        <li>
                            <span data-ng-bind="authentication.user.displayName"></span>
                        </li>
                        <li>
                             {{authentication.user.bonus_amount || 0}} бонусов
                        </li>
                        <li data-ng-if="authentication.user.is_driver">
                            {{authentication.user.money_amount || 0}} денег
                        </li>
                    </ul>
                </ion-item>
                <ion-item data-ng-repeat="item in menu.items | orderBy: 'position'"
                          data-ng-if="item.shouldRender(authentication.user);" ng-class="{active: ($uiRoute)}"
                          ui-route="{{item.uiRoute}}">
                    <ul>
                        <li data-ng-if="subitem.shouldRender(authentication.user) && item.items.length" data-ng-repeat="subitem in item.items | orderBy: 'position'"
                            ui-route="{{subitem.uiRoute}}"
                            ng-class="{active: $uiRoute}">
                            <a href="#!/{{subitem.link}}" data-ng-bind="subitem.title"></a>
                        </li>
                        <li data-ng-if="item.shouldRender(authentication.user) && !item.items.length" ui-route="{{item.uiRoute}}"
                            ng-class="{active: $uiRoute}">
                            <a href="#!/{{item.link}}" data-ng-bind="item.title"></a>
                        </li>
                    </ul>
                </ion-item>
                <ion-item menu-close>
                    <a data-ng-click="signout()">Signout</a>
                </ion-item>
            </ion-list>
            </nav>
        </ion-content>
    </ion-side-menu>
</ion-side-menus>
