<ion-view>
    <ion-content>
        <section data-ng-controller="LobbiesController" data-ng-init="find()">
            <div class="page-header">
                <h1>Lobbies</h1>
            </div>
            <div class="lead">
                <div class="btn-group">
                    <label class="btn btn-default">
                        <input type="checkbox" data-ng-model="my_lobbies" data-ng-change="select()">
                        <span>мои</span>
                    </label>
                    <label class="btn btn-default">
                        <input type="checkbox" data-ng-model="ranked_lobbies" data-ng-change="select()">
                        <span>ranked</span>
                    </label>
                    <label class="btn btn-default" data-ng-repeat="sport in sport_types">
                        <input type="checkbox" data-ng-model="sport.selected" data-ng-change="select()">
                        <span>{{sport.name}}</span>
                    </label>
                </div>
            </div>
            <div class="list-group">
                <a data-ng-repeat="lobby in lobbies" data-ng-href="#!/lobbies/{{lobby._id}}" class="list-group-item">
                    <h4 class="list-group-item-heading">
                        {{lobby.sport_type.name}}
                        <small class="">Игроков {{(lobby.first_players.concat(lobby.second_players)).length}} из
                            {{lobby.player_amount}}
                        </small>
                        <span class="badge" data-ng-if="lobby.game">Игра началась</span>
                        <span class="pull-right">до {{lobby.end_date | date: 'mediumDate'}}</span>
                    </h4>
                </a>
            </div>
            <div class="alert alert-warning text-center" data-ng-hide="!lobbies.$resolved || lobbies.length">
                No Lobbies yet, why don't you <a href="/#!/lobbies/create">create one</a>?
            </div>
        </section>
    </ion-content>
</ion-view>