<ion-view>
    <ion-content>
        <section data-ng-controller="CoachesController" data-ng-init="findOne()">
            <div class="page-header">
                <h1 data-ng-bind="coach.user.displayName"></h1>
            </div>
            <div class="pull-right"
                 data-ng-show="((authentication.user) && (authentication.user._id == coach.user._id))">
                <a class="btn btn-primary" href="/#!/coaches/{{coach._id}}/edit">
                    <i class="glyphicon glyphicon-edit"></i>
                </a>
                <a class="btn btn-primary" data-ng-click="remove();">
                    <i class="glyphicon glyphicon-trash"></i>
                </a>
            </div>
            <div class="lead">
                <p>Телефон: {{coach.phone}}</p>

                <p>Биография: {{coach.bio}}</p>

                <div class="list-group">
                    Прайс лист:
                    <div class="list-group-item" data-ng-repeat="price_list in coach.price_lists">
                        <div class="list-group-item-text">
                            <button class="btn btn-danger pull-right" data-ng-click="delete_price_list(price_list._id)">
                                x
                            </button>
                            <p>{{price_list.note}}</p>
                            <small>
                                <em class="text-muted">
                                    {{price_list.price}}тг
                                </em>
                            </small>
                        </div>
                    </div>
                    <div class="alert alert-warning text-center" data-ng-if="!coach.price_lists.length">
                        No price list yet
                    </div>
                    <div data-ng-init="inline_modal = false">
                        <div class="pull-right">
                            <button class="btn btn-primary" data-ng-click="inline_modal = !inline_modal">add price
                                list
                            </button>
                        </div>
                        <div data-ng-if="inline_modal"
                             class="col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-lg-6 col-lg-offset-3">
                            <form class="form-horizontal" data-ng-submit="create_price_list()" novalidate>
                                <fieldset>
                                    <div class="form-group">
                                        <label class="control-label" for="price">Price</label>

                                        <div class="controls">
                                            <input type="text" data-ng-model="new_price_list.price" id="price"
                                                   class="form-control"
                                                   placeholder="Price">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label" for="note">Note</label>
                                <textarea class="form-control no-overflow" name="note" id="note" cols="10" rows="2"
                                          data-ng-model="new_price_list.note" placeholder="Note"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <input type="submit" class="btn btn-default">
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </ion-content>
</ion-view>
